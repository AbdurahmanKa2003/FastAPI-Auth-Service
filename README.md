üõ°Ô∏è FastAPI Auth/Auth System Demo

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—é –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (AuthN) –∏ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (AuthZ), —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π –Ω–∞ FastAPI. –°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç JSON Web Tokens (JWT) –¥–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –≥–∏–±–∫—É—é –º–æ–¥–µ–ª—å Role-Based Access Control (RBAC) –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–æ–º –∫ —Ä–µ—Å—É—Ä—Å–∞–º.

üéØ –¶–µ–ª–∏ –∏ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–û—Å–Ω–æ–≤–Ω–∞—è –∑–∞–¥–∞—á–∞ –ø—Ä–æ–µ–∫—Ç–∞ ‚Äî —Ä–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é backend-—Å–∏—Å—Ç–µ–º—É, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ —Ä–∞–∑–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞.

1. –°—Ö–µ–º–∞ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (RBAC)

–°–∏—Å—Ç–µ–º–∞ –æ—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ –º–æ–¥–µ–ª–∏ –†–æ–ª—å ‚Üí –†–µ—Å—É—Ä—Å ‚Üí –î–µ–π—Å—Ç–≤–∏–µ (Role-Resource-Action), —á—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤—ã—Å–æ–∫—É—é –≥–∏–±–∫–æ—Å—Ç—å:
–ö–æ–º–ø–æ–Ω–µ–Ω—Ç
–ü—Ä–∏–º–µ—Ä
–û–ø–∏—Å–∞–Ω–∏–µ
–†–æ–ª—å (Role)
ADMIN, MANAGER, USER
–ì—Ä—É–ø–ø—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∏–µ –Ω–∞–±–æ—Ä —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π.
–†–µ—Å—É—Ä—Å (Resource)
PROJECT, TASK, PERMISSIONS
–û–±—ä–µ–∫—Ç—ã –≤ —Å–∏—Å—Ç–µ–º–µ, –∫ –∫–æ—Ç–æ—Ä—ã–º —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Å—Ç—É–ø.
–î–µ–π—Å—Ç–≤–∏–µ (Action)
READ, CREATE, UPDATE, DELETE
–¢–∏–ø—ã –æ–ø–µ—Ä–∞—Ü–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –Ω–∞–¥ —Ä–µ—Å—É—Ä—Å–æ–º.
–ó–∞—â–∏—Ç–∞ —Ä–æ—É—Ç–æ–≤ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å Depends(check_permission(‚ÄúPROJECT‚Äù, ‚ÄúCREATE‚Äù)), –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –∏–º–µ–µ—Ç –ª–∏ —Ç–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–∞–≤–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å —É–∫–∞–∑–∞–Ω–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–∞–¥ –¥–∞–Ω–Ω—ã–º —Ä–µ—Å—É—Ä—Å–æ–º.

2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ü—Ä–æ–µ–∫—Ç–∞

FastAPI Auth Service/
‚îú‚îÄ‚îÄ auth/
‚îÇ   ‚îú‚îÄ‚îÄ auth_router.py           # –†–æ—É—Ç—ã: /register, /login, /me, /logout
‚îÇ   ‚îî‚îÄ‚îÄ auth_service.py          # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞: —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ, Mock-DB, get_current_user
‚îÇ
‚îú‚îÄ‚îÄ permissions/
‚îÇ   ‚îú‚îÄ‚îÄ permission_data.py       # –ù–∞–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö: —Ä–æ–ª–∏, —Ä–µ—Å—É—Ä—Å—ã, –ø—Ä–∞–≤–∏–ª–∞ –¥–æ—Å—Ç—É–ø–∞ (PERMISSIONS)
‚îÇ   ‚îî‚îÄ‚îÄ permission_middleware.py # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å check_permission
‚îÇ
‚îú‚îÄ‚îÄ schemas.py                   # –°—Ö–µ–º—ã Pydantic –¥–ª—è –¥–∞–Ω–Ω—ã—Ö, —Ç–æ–∫–µ–Ω–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤
‚îú‚îÄ‚îÄ security.py                  # JWT –∏ bcrypt —Ñ—É–Ω–∫—Ü–∏–∏
‚îî‚îÄ‚îÄ main.py                      # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞: –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è FastAPI, Admin API, Mock API

‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –ó–∞–ø—É—Å–∫

–ü—Ä–æ–µ–∫—Ç —Ç—Ä–µ–±—É–µ—Ç Python 3.11+.
	1.	–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å –≤ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞–∫–µ—Ç—ã:
pip install fastapi uvicorn pydantic python-jose[cryptography] bcrypt
	2.	–ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ —Ä–µ–∂–∏–º–µ –∞–≤—Ç–æ-–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏:
uvicorn main:app ‚Äìreload

–°–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: http://127.0.0.1:8000

üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API

–î–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π Swagger UI: http://127.0.0.1:8000/docs

1. –£—á–µ—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–í —Ñ–∞–π–ª–µ auth_service.py –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–æ–∑–¥–∞–Ω—ã –¥–≤–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–∞:
Email
–ü–∞—Ä–æ–ª—å
–†–æ–ª—å
–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ
admin@app.com
adminpass
ADMIN
–ü–æ–ª–Ω—ã–µ –ø—Ä–∞–≤–∞, –º–æ–∂–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è–º–∏
manager@app.com
managerpass
MANAGER
–û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∞
2. –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (–°—Ü–µ–Ω–∞—Ä–∏–π)
	1.	Login (–í—Ö–æ–¥): –í—ã–ø–æ–ª–Ω–∏—Ç–µ POST /api/v1/auth/login —Å –¥–∞–Ω–Ω—ã–º–∏ admin@app.com/adminpass –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π Access Token.
	2.	–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è: –í Swagger UI –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É Authorize –∏ –≤—Å—Ç–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω –≤ –ø–æ–ª–µ.
	3.	–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏: –í—ã–ø–æ–ª–Ω–∏—Ç–µ GET /api/v1/auth/me. –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å—Å—è –ø—Ä–æ—Ñ–∏–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (200 OK).
	4.	–ü—Ä–æ–≤–µ—Ä–∫–∞ Admin API: –í—ã–ø–æ–ª–Ω–∏—Ç–µ GET /api/v1/admin/permissions. –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å—Å—è —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø—Ä–∞–≤–∏–ª (200 OK).
	5.	–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ 403 (Forbidden): –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –¥–ª—è manager@app.com. –° —ç—Ç–∏–º —Ç–æ–∫–µ–Ω–æ–º –ø–æ–ø—ã—Ç–∞–π—Ç–µ—Å—å –≤—ã–ø–æ–ª–Ω–∏—Ç—å POST /api/v1/projects. –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–ª—É—á–µ–Ω –æ—Ç–≤–µ—Ç 403 Forbidden.
	6.	–ú—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ –Ω–æ–≤–æ–≥–æ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ DELETE /api/v1/auth/me —Å –µ–≥–æ —Ç–æ–∫–µ–Ω–æ–º. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –≤—Ö–æ–¥–∞ (POST /api/v1/auth/login) –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–ª—É—á–µ–Ω –æ—Ç–≤–µ—Ç 401 Unauthorized.

